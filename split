/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   split                                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: amancheg <amancheg@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/12/11 16:28:03 by amancheg          #+#    #+#             */
/*   Updated: 2025/12/19 22:48:25 by amancheg         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "libft.h"

char **ft_split(char const *s, char c)
{
	char    **arrns;
	int     i;
	int     cp;
	
	if (!s)
		return(NULL);
	i = 0;
	cp = 0;
	while(s[i] != '\0')
	{
		if (s[i] != c && (i == 0 || s[i - 1] == c))
		   cp++;
		i++;
	}
	arrns = malloc(sizeof(char *) * (cp + 1));
	if (!arrns)
		return (NULL);
	arrns[cp] = NULL;
	int	j;
	int	ac;
	int	lenPa;
	int temp;
	int k;

	j = 0;
	ac = 0;
	while (s[j] != '\0')
	{
		if (s[j] != c && (j == 0 || s[j - 1] == c))
		{
			lenPa = 0;
			temp = j;
			 while (s[temp] != c && s[temp] != '\0')
			{
				lenPa++;
				temp++;
			}
			arrns[ac] = (char *) malloc(sizeof(char) * (lenPa + 1));
			if (!arrns[ac])
			{
    			int idx;
    
    			idx = 0;
   				while (idx < ac)
    			{
					free(arrns[idx]);
					idx++;
				}
    			free(arrns);
    			return (NULL);
				}
			k = 0;
			while (k < lenPa)
    		{
        		arrns[ac][k] = s[j + k];
        		k++;
    		}
    		arrns[ac][k] = '\0';
			ac++;
		}
		j++;
	  
	}
	return (arrns);
}
// int main(void)
// {
// 	char	s[] = "Analog*Odyssey*Lofi*Cassette";
// 	char	c = '*';
// 	char	**arr;
// 	int 	i;

// 	arr = ft_split(s, c);
// 	printf("stringa:%s\n", arr[0]);
// 	printf("stringa:%s\n", arr[1]);
// 	printf("stringa:%s\n", arr[2]);
// 	printf("stringa:%s\n", arr[3]);
	
// 	i = 0;
// 	while (arr[i] != NULL)
// 	{
//     	free(arr[i]);
//     	i++;
// 	}
// 	free(arr);
// 	return(0);
// }